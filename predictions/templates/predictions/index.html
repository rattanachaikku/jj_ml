
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% load static %}
  <!-- Add additional CSS in static file -->
  <title>JJ DEEP</title>
  <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
  <link rel="stylesheet" href="{% static 'predictions/styles.css' %}" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script type="text/javascript" src="https://unpkg.com/webcam-easy@1.1.1/dist/webcam-easy.min.js"></script>
  
</head>
<body>
  <!-- text: GradingJJDeep -->
  <div class="shape text grading-jjd-87e7ee5dc4e0">
    <div class="text-node-html" id="html-text-node-8109d7fa-222a-809a-8005-87e7ee5dc4e0" data-x="178" data-y="39">
      <div class="root rich-text root-0" style="display:flex;white-space:break-spaces;align-items:flex-start" xmlns="http://www.w3.org/1999/xhtml">
        <div class="paragraph-set root-0-paragraph-set-0">
          <p class="paragraph root-0-paragraph-set-0-paragraph-0" dir="none"><span class="text-node root-0-paragraph-set-0-paragraph-0-text-0" style="color:rgba(0, 0, 0, 1);text-transform:none;line-break:auto;overflow-wrap:initial;white-space:break-spaces;font-size:36px;text-rendering:geometricPrecision;caret-color:rgba(0, 0, 0, 1);text-decoration:none;--font-id:gfont-poppins;--fills:[[&quot;^ &quot;,&quot;~:fill-color&quot;,&quot;#000000&quot;,&quot;~:fill-opacity&quot;,1]];letter-spacing:0px;font-family:&quot;Poppins&quot;;font-style:normal;font-weight:400">Grading</span><span class="text-node root-0-paragraph-set-0-paragraph-0-text-1" style="color:rgba(0, 0, 0, 1);text-transform:uppercase;line-break:auto;overflow-wrap:initial;white-space:break-spaces;font-size:36px;text-rendering:geometricPrecision;caret-color:rgba(0, 0, 0, 1);text-decoration:none;--font-id:gfont-poppins;--fills:[[&quot;^ &quot;,&quot;~:fill-color&quot;,&quot;#000000&quot;,&quot;~:fill-opacity&quot;,1]];letter-spacing:0px;font-family:&quot;Poppins&quot;;font-style:normal;font-weight:900">JJD</span><span class="text-node root-0-paragraph-set-0-paragraph-0-text-2" style="color:rgba(0, 0, 0, 1);text-transform:unset;line-break:auto;overflow-wrap:initial;white-space:break-spaces;font-size:36px;text-rendering:geometricPrecision;caret-color:rgba(0, 0, 0, 1);text-decoration:none;--font-id:gfont-poppins;--fills:[[&quot;^ &quot;,&quot;~:fill-color&quot;,&quot;#000000&quot;,&quot;~:fill-opacity&quot;,1]];letter-spacing:0px;font-family:&quot;Poppins&quot;;font-style:normal;font-weight:900">eep</span></p>
        </div>
      </div>
    </div>
  </div>
  <!-- text: Jujube Grading By Weight Prediction  -->
  <div class="shape text jujube-gra-87eb5d7b02c1">
    <div class="text-node-html" id="html-text-node-8109d7fa-222a-809a-8005-87eb5d7b02c1" data-x="550" data-y="39">
      <div class="root rich-text root-0" style="display:flex;white-space:break-spaces;align-items:flex-start" xmlns="http://www.w3.org/1999/xhtml">
        <div class="paragraph-set root-0-paragraph-set-0">
          <p class="paragraph root-0-paragraph-set-0-paragraph-0" dir="ltr"><span class="text-node root-0-paragraph-set-0-paragraph-0-text-0" style="color:rgba(0, 0, 0, 1);text-transform:uppercase;line-break:auto;overflow-wrap:initial;white-space:break-spaces;font-size:36px;text-rendering:geometricPrecision;caret-color:rgba(0, 0, 0, 1);text-decoration:none;--font-id:gfont-roboto-condensed;--fills:[[&quot;^ &quot;,&quot;~:fill-color&quot;,&quot;#000000&quot;,&quot;~:fill-opacity&quot;,1]];letter-spacing:0px;font-family:&quot;Roboto Condensed&quot;;font-style:normal;font-weight:400">J</span><span class="text-node root-0-paragraph-set-0-paragraph-0-text-1" style="color:rgba(0, 0, 0, 1);text-transform:unset;line-break:auto;overflow-wrap:initial;white-space:break-spaces;font-size:36px;text-rendering:geometricPrecision;caret-color:rgba(0, 0, 0, 1);text-decoration:none;--font-id:gfont-roboto-condensed;--fills:[[&quot;^ &quot;,&quot;~:fill-color&quot;,&quot;#000000&quot;,&quot;~:fill-opacity&quot;,1]];letter-spacing:0px;font-family:&quot;Roboto Condensed&quot;;font-style:normal;font-weight:400">ujube Grading By Weight Prediction </span></p>
        </div>
      </div>
    </div>
  </div>
  <!-- rect: jujube -->
  <div class="shape rect jujube-87ecb338b256">
  </div>
  <!-- rect: Rectangle -->
  <div class="shape rect rectangle-87ee41b9288c">
    {% if last_uploaded_image %}
    <img src="{{ last_uploaded_image.detected_image.url }}" alt="Processed Image" style="max-width: 640px; max-height: 640px;">    
    &nbsp; 
    <div class="result-table" >
      <table  width="100%" border="1 solid black">
        <thead>
            <tr>
              <th> Weight (gram) Summation </th>
              <th> Arithmatic Mean </th>
              <th> Number </th>
            </tr>
        </thead>
        <tbody>
            <tr>
              <td>{{ total_weight|floatformat:2 }}</td>
              <td>{{ mean_weight|floatformat:2 }}</td>
              <td>{{ detectionresult_list|length}} </td>
            </tr>
        </tbody>
      </table>
    </div>
    
    {% elif show_video %}
    <video id="video" width="640" height="640" autoplay></video>
    {% else %}
    <div class="shape rect image-87f475b6a91a"></div>
    {% endif %}
  </div>
  
  <!-- <div class="shape rect rectangle-87ee41b9288c" onclick="camera()">
    <video id="video" width="640" height="640" autoplay></video>
  </div> -->

  <!-- rect: bot -->
  <div class="shape rect bot-87f3ac2c4b4f">
  </div>
  <!-- text: Upload an image -->
  <div class="shape text upload-an-87fb216be68b" >
    <form id="mineForm" method="post"  enctype="multipart/form-data">
      {% csrf_token %}
      <input type="file" name="image" required>
      <p></p>
      <button type="submit" class="btn btn-primary btn-lg">Submit</button>
    </form>    
    &nbsp; 
    <!-- <form method="get"  enctype="multipart/form-data">
      {% csrf_token %}
      <button type="submit" name="back">⬅️ Back</button>
    </form>    -->
    <form method="post"  enctype="multipart/form-data">
      {% csrf_token %}
      <button type="submit" name="back" class="btn btn-primary btn-lg">⬅️ Back</button> 
    </form>   
    &nbsp; 
    <!-- <form method="post" enctype="multipart/form-data" >  
      {% csrf_token %}
      <button  id="mycamera" name="mycamera" onclick="camera()">
        เข้าถึงกล้อง
      </button>
    </form> -->
   
    <form method="post" id="myForm" enctype="multipart/form-data">
      {% csrf_token %}
      <input type="hidden" name="mycamera" value="true">  <!-- Add this -->
      <button type="submit" class="btn btn-primary btn-lg">Camera Access</button>
    </form>
    

    
    
    
    <!-- <button  onclick="camera()" id="mycamera" name="mycamera">
      เข้าถึงกล้อง
    </button> -->
    <!-- <button onclick="takecamera()" name="takemycamera">
      ถ่ายภาพ
    </button> -->
    <!-- <button  type='button'  name="mycamera" onclick="camera()">
      เข้าถึงกล้อง
    </button> -->



    &nbsp; 
    <form id="mineForm" method="post"  enctype="multipart/form-data">  
      {% csrf_token %}

      <button type='submit'onclick="takecamera()" id="takemycamera" name="takemycamera" class="btn btn-primary btn-lg">
        Take A Photo
      </button>
    </form>
    <!-- Modal -->
    <div id="loadingModal" class="modal">
      <div class="modal-content">
          <p id="loadingText">Loading... 0%</p>
      </div>
    </div>

    &nbsp; 
    <div class="text-container">
      <span class="green">Green is good.</span>
      <span class="blue">but Blue is excellent.</span>
      <span class="brown">Brown is ref_coin.</span>
    </div>
    {% if detectionresult_list %}
    <div class="result-table">
      <h2>Prediction Results</h2>
      <table border="1">
        <thead>
          <tr>
            <th> Counter </th>
            &nbsp; 
            <th> Weight (gram)</th>
          </tr>
        </thead>
        <tbody>
          {% for result in detectionresult_list %}
          <tr>
            <td>{{ result.counter }}</td>
            <td>{{ result.predictionresult.weight_gram|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif%}
  </div>  
  
  <script>const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;</script>
  <script src="{% static 'predictions/js/script.js' %}"> </script>
</body>
</html>



